import React, { useState } from "react";
import AnyChart from "anychart-react";
import anychart from "anychart"; 

function HomePage() {
  const cards = [
    { title: "Card 1" },
    { title: "Card 2" },
    { title: "Card 3" },
    { title: "Card 4" },
    { title: "Card 5" },
  ];

  const [currentPage, setCurrentPage] = useState(0);

  const togglePrev = () => {
    if (currentPage > 0) {
      setCurrentPage((prev) => prev - 1);
    }
  };

  const toggleNext = () => {
    if (currentPage < cards.length - 1) {
      setCurrentPage((prev) => prev + 1);
    }
  };

  const [selectedData, setSelectedData] = useState(null);

  const data = [
    [
      ["2023-07-23", 23.55, 23.88, 23.38, 23.62],
      ["2023-07-24", 22.65, 23.7, 22.65, 23.36],
      ["2023-07-25", 22.75, 23.7, 22.69, 23.44],
      ["2023-07-26", 23.2, 23.39, 22.87, 22.92],
      ["2023-07-27", 23.98, 24.49, 23.47, 23.49],
      ["2023-07-30", 23.55, 23.88, 23.38, 23.62],
      ["2023-07-31", 23.88, 23.93, 23.24, 23.25],
      ["2023-08-01", 23.17, 23.4, 22.85, 23.25],
      ["2023-08-02", 22.65, 23.7, 22.65, 23.36],
      ["2023-08-03", 23.2, 23.39, 22.87, 22.92],
      ["2023-08-06", 23.03, 23.15, 22.44, 22.97],
      ["2023-08-07", 22.75, 23.7, 22.69, 23.44],
    ],

    [
      ["2023-08-23", 33.55, 33.88, 33.38, 33.62],
      ["2023-08-24", 33.65, 33.7, 33.65, 33.36],
      ["2023-08-25", 33.75, 33.7, 33.69, 33.44],
      ["2023-08-26", 33.3, 33.39, 33.87, 32.92],
      ["2023-08-27", 33.98, 34.49, 33.47, 33.49],
      ["2023-08-30", 33.55, 33.88, 33.38, 33.62],
      ["2023-08-31", 33.88, 33.93, 33.24, 33.25],
      ["2023-09-01", 33.17, 33.4, 23.85, 23.25],
      ["2023-09-02", 32.65, 33.7, 23.65, 23.36],
      ["2023-09-03", 33.2, 23.39, 23.87, 23.92],
      ["2023-09-06", 33.03, 33.15, 32.44, 32.97],
      ["2023-09-07", 32.75, 33.7, 23.69, 23.44],
    ],
    [
      ["2023-09-23", 43.55, 43.88, 43.38, 43.64],
      ["2023-09-24", 44.65, 43.7, 44.65, 43.36],
      ["2023-09-25", 42.75, 23.7, 22.69, 23.44],
      ["2023-09-26", 43.2, 23.39, 22.87, 22.92],
      ["2023-09-27", 43.98, 24.49, 23.47, 23.49],
      ["2023-09-30", 43.55, 23.88, 23.38, 23.62],
      ["2023-09-31", 43.88, 23.93, 23.24, 23.25],
      ["2023-10-01", 43.17, 23.4, 22.85, 23.25],
      ["2023-10-02", 42.65, 23.7, 22.65, 23.36],
      ["2023-10-03", 43.2, 23.39, 22.87, 22.92],
      ["2023-10-06", 43.03, 23.15, 22.44, 22.97],
      ["2023-10-07", 42.75, 23.7, 22.69, 23.44],
    ],
    [
      ["2023-10-23", 23.55, 23.88, 23.38, 23.62],
      ["2023-10-24", 22.65, 23.7, 22.65, 23.36],
      ["2023-10-25", 22.75, 23.7, 22.69, 23.44],
      ["2023-10-26", 23.2, 23.39, 22.87, 22.92],
      ["2023-10-27", 23.98, 24.49, 23.47, 23.49],
      ["2023-10-30", 23.55, 23.88, 23.38, 23.62],
      ["2023-10-31", 23.88, 23.93, 23.24, 23.25],
      ["2023-11-01", 23.17, 23.4, 22.85, 23.25],
      ["2023-11-02", 22.65, 23.7, 22.65, 23.36],
      ["2023-11-03", 23.2, 23.39, 22.87, 22.92],
      ["2023-11-06", 23.03, 23.15, 22.44, 22.97],
      ["2023-11-07", 22.75, 23.7, 22.69, 23.44],
    ],
    [
      ["2023-11-23", 23.55, 23.88, 23.38, 23.62],
      ["2023-11-24", 22.65, 23.7, 22.65, 23.36],
      ["2023-11-25", 22.75, 23.7, 22.69, 23.44],
      ["2023-11-26", 23.2, 23.39, 22.87, 22.92],
      ["2023-11-27", 23.98, 24.49, 23.47, 23.49],
      ["2023-11-30", 23.55, 23.88, 23.38, 23.62],
      ["2023-11-31", 23.88, 23.93, 23.24, 23.25],
      ["2023-12-01", 23.17, 23.4, 22.85, 23.25],
      ["2023-12-02", 22.65, 23.7, 22.65, 23.36],
      ["2023-12-03", 23.2, 23.39, 22.87, 22.92],
      ["2023-12-06", 23.03, 23.15, 22.44, 22.97],
      ["2023-12-07", 22.75, 23.7, 22.69, 23.44],
    ],
    [
      ["2023-12-23", 23.55, 23.88, 23.38, 23.62],
      ["2023-12-24", 22.65, 23.7, 22.65, 23.36],
      ["2023-12-25", 22.75, 23.7, 22.69, 23.44],
      ["2023-12-26", 23.2, 23.39, 22.87, 22.92],
      ["2023-12-27", 23.98, 24.49, 23.47, 23.49],
      ["2023-12-30", 23.55, 23.88, 23.38, 23.62],
      ["2023-12-31", 23.88, 23.93, 23.24, 23.25],
      ["2024-01-01", 23.17, 23.4, 22.85, 23.25],
      ["2024-01-02", 22.65, 23.7, 22.65, 23.36],
      ["2024-01-03", 23.2, 23.39, 22.87, 22.92],
      ["2024-01-06", 23.03, 23.15, 22.44, 22.97],
      ["2024-01-07", 22.75, 23.7, 22.69, 23.44],
    ],
  ];

  const chart = anychart.stock();
  const series = chart.plot(0).candlestick(data[currentPage]);
  series.listen("click", function (e) {
    
    alert("click");

    const selectedPoint = e.iterator.get("value");
    console.log("test", selectedPoint);
    setSelectedData(selectedPoint);
  });

  return (
    <div className="container">
      <h1>Test</h1>

      <figure className="card">
        <AnyChart width={"100%"} height={"500px"} instance={chart} />
        {/* <AnyChart type="column" data={[3, 1, 2]} title="My Chart Title" legend="true"/> */}
      </figure>
      {selectedData && (
        <figcaption className="card_res">
          <b>You have chosen this one:</b>
          <p>Date: {selectedData[0]}</p>
          <p>Open: {selectedData[1]}</p>
          <p>High: {selectedData[2]}</p>
          <p>Low: {selectedData[3]}</p>
          <p>Close: {selectedData[4]}</p>
        </figcaption>
      )}

      <div className="card_toggle">
        <button onClick={togglePrev} disabled={currentPage === 0}>
          Prev
        </button>
        <button
          onClick={toggleNext}
          disabled={currentPage === cards.length - 1}
        >
          Next
        </button>
      </div>
    </div>
  );
}

export default HomePage;
